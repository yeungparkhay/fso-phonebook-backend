(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(14),o=t.n(c),a=(t(19),t(3)),u=t(4),i=t.n(u),s="/api/persons",d={getPersons:function(){return i.a.get(s).then((function(e){return e.data}))},createPerson:function(e){return i.a.post(s,e).then((function(e){return e.data}))},updatePerson:function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(s,"/").concat(e))}},j=t(0),b=function(e){var n=e.persons,t=e.deleteEntry;return n.map((function(e){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("span",{children:[e.name," "]}),Object(j.jsxs)("span",{children:[e.number," "]}),Object(j.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.id)}))},h=function(e){var n=e.prompt,t=e.handlePromptChange;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{value:n,onChange:t})]})},l=function(e){var n=e.addEntry,t=e.newName,r=e.newNumber,c=e.handleNameChange,o=e.handleNumberChange;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:t,onChange:c})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:r,onChange:o})]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})},f=function(e){var n=e.message,t={backgroundColor:"#ededed",color:n.color,padding:10,margin:10};return""===n?Object(j.jsx)("div",{}):Object(j.jsx)("div",{style:t,children:n.text})},m=function(){var e=Object(r.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),u=Object(a.a)(o,2),i=u[0],s=u[1],m=Object(r.useState)(""),p=Object(a.a)(m,2),O=p[0],x=p[1],v=Object(r.useState)(""),g=Object(a.a)(v,2),w=g[0],C=g[1],P=Object(r.useState)(""),y=Object(a.a)(P,2),N=y[0],k=y[1];Object(r.useEffect)((function(){d.getPersons().then((function(e){return c(e)}))}),[]);var E=t.filter((function(e){return-1!==e.name.toLowerCase().search(w.toLowerCase())}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(f,{message:N}),Object(j.jsx)(h,{prompt:w,handlePromptChange:function(e){C(e.target.value)}}),Object(j.jsx)("h3",{children:"Add a new"}),Object(j.jsx)(l,{addEntry:function(e){e.preventDefault();var n={name:i,number:O};t.map((function(e){return e.name})).includes(i)?d.updatePerson(t.find((function(e){return e.name===i})).id,n).then((function(e){window.confirm("".concat(e.name," is already added to phonebook, replace the old number with a new one?"))&&c(t.map((function(n){return n.name!==i?n:e}))),s(""),x("")})).catch((function(e){k({text:"Information of ".concat(i," has already been removed from server"),color:"red"}),setTimeout((function(){k("")}),5e3),c(t.filter((function(e){return e.name!==i})))})):d.createPerson(n).then((function(e){c(t.concat(e)),k({text:"Added ".concat(i),color:"green"}),setTimeout((function(){k("")}),5e3),s(""),x("")}))},newName:i,newNumber:O,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){x(e.target.value)}}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(b,{persons:E,deleteEntry:function(e){var n=t.filter((function(n){return n.id===e}))[0];window.confirm("Delete ".concat(n.name," ?"))&&d.deletePerson(n.id).then((function(){c(t.filter((function(e){return e.id!==n.id})))}))}})]})};o.a.render(Object(j.jsx)(m,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.30368848.chunk.js.map